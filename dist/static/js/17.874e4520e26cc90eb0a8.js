webpackJsonp([17],{BWbR:function(t,a){},"G/on":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("3Xzz"),n=e("5QTb"),s=(e("Mk6G"),e("3E4D")),o=e("Ch4/"),i=(e("PI0u"),e("P9l9")),l={name:"platformTagList",data:function(){return{navpath:[{name:"首页",path:window.location.origin+"/report/#/memberSummary",relocation:!0},{name:"会员管理",path:""},{name:"会员标签",path:""},{name:"平台标签库",path:"/platformTagLib"},{name:"平台标签列表",path:""}],tagLibName:"platformTag",tagSearch:"",tagTableData:[],selTagTableData:[],currentPage:1,pageSize:20,total:0,currentGroupId:0}},methods:{toAddMyTagLib:function(t,a){var e={};if("mult"===t){if(!this.selTagTableData.length)return this.$message.error({message:"请选择标签"}),!1;e.tagIds=[],this.selTagTableData.forEach(function(t,a){e.tagIds.push(t.tagId)}),e.tagIds=e.tagIds.join(","),this.addByTagId("addByTagIds",e)}else e.tagId=a,this.addByTagId("addByTagId",e)},addByTagId:function(t,a){var e=this;Object(i.a)("/enterpriseMemberTag/"+t,a).then(function(t){var a=t.data;if(1==a.errorCode)return s.a.showmsg("添加成功","success"),void e.getTagList();o.a.errorMsg(a)}).catch(function(t){e.$message.error({duration:1e3,message:t.message})})},searchEnterFun:function(t){this.currentPage=1,this.getTagList()},clearSearch:function(){this.currentPage=1,this.getTagList()},handleSelectChange:function(t){this.selTagTableData=t},handleSizeChange:function(t){this.pageSize=t,this.getTagList()},handleCurrentChange:function(t){this.currentPage=t,this.$route.fullPath.includes("?")&&this.$router.push(this.$route.path+"?tagLevelGroupId="+this.$route.query.tagLevelGroupId+"&currentPage="+t),this.getTagList()},getTagList:function(t){var a=this,e={tagName:a.tagSearch,tagLevelGroupId:a.currentGroupId,pageNum:a.currentPage,pageSize:a.pageSize};Object(i.a)("/memberTag/platformTagPageList",e).then(function(t){var e=t.data;if(1==e.errorCode)return a.tagTableData=e.result.result,void(a.total=e.result.totalCount);o.a.errorMsg(e)}).catch(function(t){a.$message.error({duration:1e3,message:t.message})})},getUrlParams:function(){this.tagSearch=this.$route.query.searchName?this.$route.query.searchName:"",this.currentGroupId=this.$route.query.tagLevelGroupId?this.$route.query.tagLevelGroupId:0,this.currentPage=this.$route.query.currentPage?parseInt(this.$route.query.currentPage):1,this.getTagList()}},watch:{$route:{handler:function(t,a){this.getUrlParams()},deep:!0}},mounted:function(){this.getUrlParams()},components:{navCrumb:r.a,tagCategory:n.a}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"platformTagList-wrap common-wrap"},[e("nav-crumb",{attrs:{navpath:t.navpath}}),t._v(" "),e("div",{staticClass:"right-content"},[e("div",{staticClass:"right-box"},[e("div",{staticClass:"common-wrap__cateTags"},[e("tag-category",{attrs:{tagLibName:t.tagLibName}})],1),t._v(" "),e("div",{staticClass:"common-wrap__opt"},[e("el-input",{staticClass:"w-184",attrs:{placeholder:"搜索标签","prefix-icon":"el-icon-search",clearable:""},on:{clear:t.clearSearch},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key))return null;t.searchEnterFun(a)}},model:{value:t.tagSearch,callback:function(a){t.tagSearch=a},expression:"tagSearch"}}),t._v(" "),e("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(a){t.toAddMyTagLib("mult")}}},[t._v("添加至我的标签库")])],1),t._v(" "),e("div",{staticClass:"common-wrap__table m-t-20"},[e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tagTableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectChange}},[e("el-table-column",{attrs:{type:"selection"}}),t._v(" "),e("el-table-column",{attrs:{prop:"tagName",label:"标签名称","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"tagDescribe",label:"标签描述","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{label:"是否实时"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n              "+t._s(1==a.row.isActive?"实时":"非实时")+"\n            ")]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{staticClass:"edit-btn el-button--text",attrs:{to:{path:"/platformTagDetail",query:{tagId:a.row.tagId,addFlag:a.row.isAdd,form:"notMyTag",navSign:"platformTag"}}}},[t._v("详情")]),t._v(" "),e("el-button",{staticClass:"p-l-10",attrs:{type:"text",size:"small",disabled:1==a.row.isAdd},on:{click:function(e){t.toAddMyTagLib("single",a.row.tagId)}}},[t._v("\n                "+t._s(1==a.row.isAdd?"已":"")+"添加至我的标签库\n              ")])]}}])})],1)],1),t._v(" "),0!=t.tagTableData.length?e("div",{staticClass:"block common-wrap__page text-right"},[e("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])]),t._v(" "),e("vue-gic-footer")],1)},staticRenderFns:[]};var g=e("VU/8")(l,c,!1,function(t){e("BWbR")},"data-v-c7474496",null);a.default=g.exports}});